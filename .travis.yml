sudo: required
dist: trusty
language: java
services:
  - docker
env:
  global:
    - CLOUDSDK_CORE_DISABLE_PROMPTS=1
    - secure: qbP8XzsSOPhozpkCjT2nuhKD0u0j5tPtadyj+njXrwxGNxRSGkPYCEG5sbYUjZxYlpQLzVvjQ54Fe7xm5Pa5ONyt34kRDUBdkl3jYTxXyfZGsbdKoYpwMTrb512I5/3eKB6AdZJlnUy3nr3XwTtZ/MFkNESvAY6KI4S3wa0u9fo0UEpng9Qcdw+Q5ECQcVMeEc326xKieMwCcjuHzqpocipTKGJ2Plr8rQXFizhufQ8XL2kgjGPzmH6dWW55Y7YUhTL5+JCyuq9uMPj1gQ8ACr13bVx5DG3WT5wX1pG4qntoxWaiFfp1tkOVYD1fFrdBrLsC7GVoNt+v+VWnFnpxtHoDjaKFYPB+9BVFUFisGP13YtLFTNgBbDmqwPtLK4NIYYgdHS5KinXrBfM1OgUxPk5+AzVSzVDZCqd1IFE6anDE06BihiBB+JggIkd/pa+k6tm0rLYtYMd7FI+/xaQWPQhkbaZmI6KOcBKMUrBW+a7PmZPcTLmB5+vsofK02jXHqa+2oERL9g/zRLk2+THjdmJA3TqtCd+0kpoXNut7mvQa4mR/oB+1moHDAJnJQWGu9uECXI1edQaJeb8xRhrqbB3HM2g0eAW1fG6KCppHymhErbLFoi/DOHlBZe8z0SGWxcM9+QfvZkjEA5X1QASz9dT/3kgCNTe9E3mudgXWmtk=
    - secure: ZFUZekIcrZkypVACK9Q7c53yaSfkGnJ+cIdha2OZmy3e0TnlKKpw5jBQWA8zxn4fzqgIX7+8T9EL9psUGmP60pnOwkmC1dRKGnLY2m8dCRJH0BVeqxnuE142oYBMpxYi58H5g/qJvRVITzwj8FX0ftBNTWLh6um4wnwGY6a8ziZpeuzhnmQOBouiMWNvgos6MrggsWirdjmT5uHN5evzOpfLT5AOOmH6EWi85tfJFp2MSSYlWQ6/sKFsB/rh5gzJERHHCwxj28NOsDCPpp4e/lApXpG5RKAAF9x32ueP7iGOMZJXTmCJS7n7/g3vrWBHx2jspFnekTbd277FMzT3Ehdu8y8yAa+JucrukGGZXjLWgFOgma8EaFAznQOeWNW+XK2/Cts7w/4n8Nmmob8CuYDDibJgP2NtQjUIQj2e/wlyzAVMzRKWvzak9Lv9X1UV0zGyRtvRnUiWYc0o0wfsaJzsGFZ6sNKkTFWKI7O1apRoTub+I8wcmNf+bVxoHuagUTxBddRTcPb1Kyx/mrT9Dw18CtSjDRKw+5/fAS6J0v+QLno2/XHe9j9OOoik5lxyCR8dv5QJ008aAwn6tMKJ8MPJqA4gohtFZn/NucxeVjpRv8Z36nWPuSFlX/25uHWTjUyaCveW5Ebf6ZUG31OVEMWbV1qTFxM2o9zps1bjzm4=
    - secure: DGkf8UcyADay7e1WstCimLLuhL7/Gy78Bt4hHZFUUfHMSuIFHpP/Bs4rbGU2P465QBIEKeUqEOuCU8YG//7nMl4xN6xbRjG76OfOurfmy0p32Azb9SYwrq9jWHjXNXjVgYozlNDHLTgYaPviZxEA2tK39RLRTXf1C/e3E5h78bBsmxgfb8cgRaUM/AxyAOWI+kYdhFdFQ2c/xtoiCV40Tmnla3t/QeLv3+m0ux46fU9lsryK1svhY6T6WP/uakVk4Vxs2wX9IY6Z2WGiIg7Azt6bspo30gTabTWajh6cdNnBrne8nfnonwdmC1lDhMDU7CKSohGSmlUgPSfWUZG+R2lx7jHUCXVEGa2KgrMCmyU6H8gquxmUrAEKtBpxSvJLluAmVQ+R5G6ccoyz1AmsWHrwiXxvCDe+O7uDWh96VXYsFHl5t2q65zponFR3+ajVEg2bg/cR9H/5suM4TXPrWwu02nD2UKcCSVB0z8+aHb6w2miS0Bwk32EY/Etvk0hY7bOpXnoTwyhYFwoSid5Rv0RME5aeAwaRFZdVRBVAosTcqQK9F6r8VmJ5E9WPqQwuyMQeIosIMWE5bo20y+kvTRYK9Pbn9i4CCWfhkA2RLTHiMps1k5LLQbHIXZwbKwIJYrXikdDavXwqENZvP+WDWOIfYTRp7F9m80pRg/LN3cM=
    - secure: x1bLAcdCgnyA23BwmOwBL9i6Jjj21nuBzxomfU4P+4WKOPFeR/XcOGmA2qZX1NvNljpd64tkuZ/PKZN/PPzvSDoyOiwnIbOLSRXb2pXces4DO63tagwbEI9HRz3BpDCBpEQYXv2nf9ssNgrdxgnwzlYs39MoA+I0bVBxc611EoT7v/FctozQL7ocbXtuFD5V2ryQBIJtsWQBWsow0k+irtdNdm0tFXZdErKOQ+1TzBH8wxZieU3Zy89921GLL5xc78xP7vS79MzL0LZg9ft9uIZYo0eokvE2SZkciplvsOzeUcmqOaQ6PDCSOlIt901vr/OwDdpny0giTjG+vPGmWvI4uhlbHZBRGO5q2I7FzEyf5o6kuFzefYOzr5tLBZx7d7q+/rfysvqGLJe2HO8i49unNz91KzGtZ7zqxu9JkKAfF8O/XRXgO8yIPxsMP+I2RXD0euCCJWxgvnvkA+68w8DzUBSZ4w8YlUh5zxEMZIwfUoW4l4zAcfTX9089fiXTZ478A9RAXtKQ/RCHU372VD3zeW49yeCFYPnUM5ut8HcqQhBjcLtE2s0ZtL1QxQR+iYBnSD5xRH2UXaRueHjN74ffR2qPtpSVSZrwi//C43041EBrBtCSnD2Yqwil38EID3PKmkTBl5UEw/OUoXT1M9Yjydl3p5ICTclU7FMsiwU=
    - secure: s2QurSqUt1/PdpR8bNzsSFyEAtSbLExuEHy7CKilcosL38Hl8dn6s4LaTflP/SYTRCfGYaxRvWBQJouedMvnDKxPlrTBBhU3GH8bxzSDHMtpzNEc3INOpJzHhS7+tv8kSLq3hhrNTE4bOangmyXeBsHRF1O1cZJ518pDkbtB7vUEH6SQOtN7IWuVtamoai+bF9rMAvGOPbt6tselOs+VpNDj/Wf4Z+2ATDxi3kCYGHgSBd7LYEX/M05J9Ce9kXKFXJZIaakBUJxZ0QQBocEQsxG4SMzbXs3Fwk73TXhRlSYihD0pbLW23v7xtIhn4IMODFU7XzoXmyMrayheiMtc4e8akiOjm5eWR03FqHIizeCDzzBdv0qbeD5k7LpLd48QWAyhtwSYt0k94NvrsEBqOwgnHTazyt47Z0D1NHU3XxucHtKm0llk8aA2JRZ9TVQ+ibTe3xhoyZWo5aUS34VLDT+eZgmiHBJmkkOOivoYSGr6sxRANLYVgcCvnsjOIauHjW8I2uGS3TZ0MFY2piiZxQ/JuuW0Ycw16JVelPRnvmKZi+3q8by8R8FJ0iPfkVRxPQ4pG4zOj0qeFit6kz/WDtQahN7RZVN6PvfjuUcKRLSKdQNeXNO3LAE+UncZz59mQc7SL+SKpyrt/qAggLCotqfOyjGDIp+hwo/PjEnBNOs=
    - secure: GNdbazw/ALWEN47Lc+/S/phk/3lbByex765OmpU1yQtJKilVN5/UcThy4f5FuFfLBijm8WzZjU44OSLdQlYgEFLh54Dbxjkkb0UwUoTKN6PUr5ULsxHEoA47fp1/Oeh2qkLwuiHe3EVdUr4+feSEYhIHpkU17HdbEAE3QGUcuBkBtuOU8/F5IVLW1St13ZBgOceejKKCeWupxYixff3JUrDSWi0UwbuEt9th92O98X2JGn0ox1ksNjxUf0oy8ZMO21ahx2ONBdnkKmdK5gO82RAxsyDFOP+s2DHi1T0auSjioQbJv0ODjqI5ZWWBELmQMB1cqkcXjVI5jqSqFy0AZAGzv1/zkaFP2CyQ26j4VH5N3JuoB+NTjYlVD744MFoSWck+8xtVs2nHoVZ+TAtlHv6+HXm0yJg6ujaDMLEPlaC8L8SiB9rBHsSossvVfmhkyVW/voNd+vHF9ub4VBwlyP+fmGVGS4agEdr2e216nJ+MpyDdnassA4skyAEfsy5Qs7DElPgpgtXDitx++Buuf7y3rCML4H/z73LeSRNWvVSBSDTJx1s+1YiXbDu01qjrDKsCzbOGp7LSesW0CoF9n1y4yq45hh46jODrKm5W4wYL5M3gV5p8pDIXv6a8x579/cRGqOp1j5W3iEGWrqt7WoHVCbXYbRn5wkpk08I6xQ8=
    - secure: wIaKi/qjVxFYb5mB9Dca+Svgb/Kz3PIRIJ0xHS0teaW5wknozUSRphKq/tFOENFojqPLFgWaBgBEx6kt740lVK6D3G3chtidoDWkQ172Ypd+4KLAYhOBurfEOqxqpDqdEWDxm/R8DAGgYzFVYjAAzvDuENbHMLyDTH644LBC3noJvGd6+y8dgSYj5fVx8zi/r7SNZ91+pS4M1MXWUK502l0+N4ahA9G0wPRvdDpVrFYHEXIzxCiAmIlYxPD1IDJhu2b0HHEMEa/gNudNzDPmO4YBELym9Sayr24X9Uv1nSokQ4kZw2RZUfs/M0NLuhgb0xumzck5wYAaCMlR1n2p1+rIz7Mqz6T/07QPyA+rjMfs/2no5C+wNy61r0cNyuEYak6TNjAbTt2u7ycTp01Jo5hNLW55w44GX6vRCe6I5xQNaIOm3RV13pP/84WQP//tm5Ail5bbFoBKL96iHUti2lKiF/sLkv03iKJDXy/djjYmBac7MIOj7OOtp9DGqVUOKBD8tRXrwUpkr4zcxLzL7C5vJVYuglHqCHO2CjCXsCLgAuVTxWHCv5xm7fQ7M7p8m/t53LTRwyNYdRJx0OdD76WXbqwKo2tGCC6kUz3rrCH69BQz0IKOO8ZDIGqWfqHUdBNIG+rshoDR5HivkRv6TKsYAuHYblFuxQF0n+6wgdk=
    - secure: qNqrEDUX+248h3TWnjzy9nOzI9CwpmnvNtAfdWKxaime+RjMTJ/YmgMtH3tRxRJTnmpBYgHTEZwSqIBID0OumBXiccQ6Sg3/CEwy2a0eT4ENravbN3KW8RsE+AlkFRqTF6k3GZT3Y+bz9XBnhiuTHn9A83LbmanQPck5I8Gb1DstNkhXqZRIgZSZ0bsjXhFdbXzLI59HclPLM4iwSIVpDFPT5RqN4e9AVNDAkIKHxyxEiRwSqRkdkdBznQS9jRssaqN12we+ARFaKeBSvaPu331tdSSbVyaTQBaWayMLJCp0QuCT02wphkJIkOX2tWb8pS93D1C80n85mG4oSsVd4WQNfdBXfqkgRdwTJ72j25KrN7QwTypzTvl73m59aRQBIUnTQ0BPzU6JS7YYQuJuEL4yG5qy3P1zulIrPO0TyDIcOmvuHcQr/X2Qb3Y04TGex8UYPB7JVjIU6Tr6voNyJoUCQTqz1zEbiKveejrXQdTGpX7xkBtq/rb0iZ5qTT3HyUtQgieITHyzVSAQ1YD4/vTYVF2Bfvds1IsuPqu30Vl4eS69ej7g3Zn2SPLq98fm8I0JoiukG9zdcLZO5XyAlHSChfPeotDCa+0iL9llraroaj2k8xp6pWkK1ldsaPFDyBet9NdFrRbE2KUms0TG/UgU+DGZGnA++Y1NwY0mWUs=
    - secure: QT9hCc0zSBkUcZgONM+akCdfd7j+Gh5SvBWFQWZ6XIKjyZTKFFCEo/tdjQog+CGg7+OAXj8Wg+Q1R2mZ21ehD41W0qlFGlE3sjiLafiLVx+ipJX1axndidSFZBIJ+8R/ApGbP0dRy0Ace/WyRYqmiBVDj1y5S2zYO7C2C3sND0899yahr0Vt0msMgiQZnwU8+mrK66LBn3HKNQQ35WU5DdYM1Wf4eOxwPGwN5/Ysn13jKsCmbMZvwVajoKbA/wU5Ytvq/0UFbaZtNmgR1dsbkS6H0bM9Mh8Wv4yC2w68+RY42JzVGA3dHG2A7sTIhCE8KZvK2UOpWTcrUxdNce/WNmtXPV4nFieXXw55quFEmIEur8ssXbVeMgXV1DEuJyKKPeArE9yJbKpJzylPblPWXi3CrMdGb2X22L808vQiuqiILNDrrnQJqVIbJkVexONNcK831uPlcHbZy5NYm5reBJtUF+SP75yWSaFqJnlB+QhDu+S0p9xAHRmJQ5Kfx/EyqMo+jZZfFVuaoTrsGXEWxupiEYWuB/Sq/fPah0jsyOAnr4XsXWprcmtU357UEmilJUsgW+pam18i11UU/InmKCofFiZ5OLOfTxKqnzkl2b5I5+Kovc5cFW5nmXwLOg1VWUi1Cz9xiS8KPCeRl++wvqJc2K8njtp9YhH+Xkl44k0=
    - secure: LaSpsGU6lfm3HNsEXxrHkr8VFOx+LSH43PYla93DNGszT1Dy7TP9RST9iMl/H493G5LTA4HHkFc11v+hLY28n/Skmls+FUZ1rCaLABNEHES05G9yQCFqaVQ1ZeIGecAiU+CucgUeBQZbd2lXQxTMjPzGYBxCnTiUlA56VFGnZYpHks6B7hu2gB9NYqWsYf6O9Qv0Fvge85mMkD2YNCVSMmDeOW3bvRbhlvUO8blQVGWhO7e3E3E+9ZEa0epXtd3S9BqArU04wSmwjCwV+DMimcVh5eDnoLNyrqw4KdtBEDPxpNP5IuKwCVhnFjr3tUl8M0/8gvnYoSAqHJuOIQNMebsdCbwcCdzHgZ1TZ2XT9QSTyjxWEGpOg8CN+3pxeGWsFkIexREvlzhdYvVpK5WEi2Hmn/8DdrS5OZUOt3puBjI1yVz8XeonFX3+6DG8786ACaT1YknoXZu6u7GRsGX6NSS5xanVZVs6WxoIbew3JvgTN212jPhLLJ/2m86/IyfKhKidkgw4wrAMe3u9/Tkrpd/5hrQthIlNV6sbUFmR5NT1wCUZzIOTfuxxSMaqsg1t20k+oyXffP+SX+6nxWeWBwHbx4S+MYmRbFC+xZ9wvRLnAth9rNlQyXscUA8QVWzDuF6lGSUkCIfGzgH1QzICoWuU7w9TOsF+O1Fo05aOqLk=
    - secure: aFYV8a0nRInnl1c90WSPxIA2EOsLyiKqxXe7eFKC8WmALDhxRwXngHM9Civ1NqNgpWUV8CWxIaM8DeCkf56lE1puf+tNhx5uyem5PnY6KUZiJaWIKEHZ/uKKmaC7DHAbW4yqNFMUBQ/+bt3FmrXFyU8I4VV/2S0gPxoP//pD0oFVapQiwV+uylLOV9YFIjGNOOFU25xaUP/RF4uCs+Xozumx8NEoFBZMdWZ5FrIsrKeSc02wsCY/se94GPj5+Wuyo1JmDarQ+E7thpAeI4OYmfN69O1TPygViuQNLziDs2OJURoKzzHudvfBffxVi/fSFkdANsQX4rutelUP+OQOFJbrpR/ewwal6Jr9BQ+zB7Sf/4wPDjpMFgssxorncsVz63z529gN6U4EARCmOgMC101alwcmXAS/DJ5FQ9zJyJKWY3+ql+t+UW70uI84oIowvoQrN1woiVRNUFC0YA7EzQgAUY/Roig/77YBIuH9C5cv7oYdvtyj/Zu+no3zaOZFHQt9/FOGiT5u4BmMDw+mDmxsTNHBkA9CtPnT97WnBAJDu6rdzJeBuqLSgmSDPpwVdfFDZzMwc5mUuh6N3FWf79khGtigOHX+l41qJ3gW/q56V6oA+D51XAgUIfi+3D3fV6kk+j4JnKNm1U/txo5q05lhRVe65VNaVCTv4/p5TUY=
jdk:
  - oraclejdk8
before_install:
  - source infrastructure/set_env.sh
  - docker-compose -f infrastructure/docker-compose-services.yml up -d
  - if [ ! -d $HOME/google-cloud-sdk/bin ]; then rm -rf $HOME/google-cloud-sdk; curl https://sdk.cloud.google.com | bash > /dev/null; fi
  - source $HOME/google-cloud-sdk/path.bash.inc
  - gcloud components update kubectl
  - gcloud version
  - chmod +x mvnw
script:
  - ./mvnw clean install
deploy:
  skip_cleanup: true
  provider: script
  script: bash infrastructure/push_image_gcr.sh
  on:
    branch: dockerize_service
